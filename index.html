<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Amelies Einhorn-Fang ✨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
        }
        body {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #ffdde1 100%);
            font-family: 'Comic Sans MS', cursive, sans-serif;
            overflow: hidden;
            touch-action: none;
            width: 100vw;
            height: 100vh;
        }
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff6ec4 0%, #ff9a9e 50%, #ffc3a0 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: sparkle 2s infinite;
        }
        @keyframes sparkle {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }
        .title {
            font-size: clamp(2em, 8vw, 4em);
            color: white;
            text-shadow: 4px 4px 8px rgba(255, 105, 180, 0.8),
                         0 0 20px rgba(255, 182, 193, 0.6);
            margin-bottom: 30px;
            animation: bounce 1s infinite;
            text-align: center;
            padding: 0 20px;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        .instructions {
            font-size: clamp(1.2em, 4vw, 1.8em);
            color: white;
            text-align: center;
            max-width: 90%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        .start-button {
            font-size: clamp(1.5em, 5vw, 2.5em);
            padding: 20px 60px;
            background: linear-gradient(135deg, #ff1493, #ff69b4);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 20, 147, 0.5);
            transition: all 0.3s;
            font-family: 'Comic Sans MS', cursive;
            font-weight: bold;
        }
        .start-button:active {
            transform: scale(0.95);
        }
        #game-canvas {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .score-display {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: clamp(1.5em, 5vw, 2em);
            text-shadow: 3px 3px 6px rgba(255, 20, 147, 0.8);
            z-index: 100;
            display: none;
            font-weight: bold;
        }
        .highscore-display {
            position: absolute;
            top: 70px;
            left: 20px;
            color: white;
            font-size: clamp(1em, 3vw, 1.5em);
            text-shadow: 2px 2px 4px rgba(255, 20, 147, 0.8);
            z-index: 100;
            display: none;
        }
        .signature {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.9);
            font-size: clamp(0.8em, 2.5vw, 1em);
            z-index: 200;
            text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.5);
        }
    </style>
</head>
<body>
    <div id="start-screen">
        <div class="title">✨ Amelies Einhorn-Fang ✨</div>
        <div class="instructions">
            Tippe auf das Display,<br>um das Herz zu bewegen! 💖<br><br>
            Fange alle herabfallenden Einhörner! 🦄<br>
            Super-Einhörner geben 5 Punkte! ✨
        </div>
        <button class="start-button" id="start-btn">START ✨</button>
    </div>
    
    <canvas id="game-canvas"></canvas>
    <div class="score-display" id="score">Punkte: 0</div>
    <div class="highscore-display" id="highscore">Highscore: 0</div>
    <div class="signature">Junior Entwickler Amelie ✨</div>

    <script>
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const startScreen = document.getElementById('start-screen');
        const startBtn = document.getElementById('start-btn');
        const scoreDisplay = document.getElementById('score');
        const highscoreDisplay = document.getElementById('highscore');

        // Canvas Größe
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let highScore = localStorage.getItem('amelie-highscore') || 0;
        let unicornCount = 0;
        let gameRunning = false;

        // Player (Herz)
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            size: 60,
            emoji: '💖',
            targetX: canvas.width / 2
        };

        // Unicorns Array
        let unicorns = [];

        // Partikel für Effekte
        let particles = [];

        // Start Game
        startBtn.addEventListener('click', startGame);
        startBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            startGame();
        });

        function startGame() {
            startScreen.style.display = 'none';
            canvas.style.display = 'block';
            scoreDisplay.style.display = 'block';
            highscoreDisplay.style.display = 'block';
            highscoreDisplay.textContent = `Highscore: ${highScore}`;
            gameRunning = true;
            score = 0;
            unicorns = [];
            particles = [];
            unicornCount = 0;
            gameLoop();
            spawnUnicorns();
        }

        // Touch/Click Input
        canvas.addEventListener('touchmove', handleInput);
        canvas.addEventListener('touchstart', handleInput);
        canvas.addEventListener('mousemove', handleInput);
        canvas.addEventListener('click', handleInput);

        function handleInput(e) {
            e.preventDefault();
            if (!gameRunning) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.touches ? e.touches[0].clientX - rect.left : e.clientX - rect.left;
            player.targetX = x;
        }

        // Spawn Unicorns
        function spawnUnicorns() {
            if (!gameRunning) return;
            
            unicornCount++;
            const isSuper = unicornCount % 10 === 0;
            
            const unicorn = {
                x: Math.random() * (canvas.width - 60) + 30,
                y: -60,
                speed: 2 + Math.random() * 2,
                emoji: isSuper ? '🦄✨' : '🦄',
                isSuper: isSuper,
                size: isSuper ? 70 : 50
            };
            
            unicorns.push(unicorn);
            
            // Nächstes Einhorn spawnen
            setTimeout(spawnUnicorns, 1000 + Math.random() * 1000);
        }

        // Game Loop
        function gameLoop() {
            if (!gameRunning) return;
            
            // Clear
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Update Player Position (smooth)
            const dx = player.targetX - player.x;
            player.x += dx * 0.15;
            
            // Draw Player
            ctx.font = `${player.size}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(player.emoji, player.x, player.y);
            
            // Update and Draw Unicorns
            for (let i = unicorns.length - 1; i >= 0; i--) {
                const u = unicorns[i];
                u.y += u.speed;
                
                // Draw Unicorn
                ctx.font = `${u.size}px Arial`;
                ctx.fillText(u.emoji, u.x, u.y);
                
                // Collision Detection
                const dist = Math.sqrt(
                    Math.pow(player.x - u.x, 2) + 
                    Math.pow(player.y - u.y, 2)
                );
                
                if (dist < (player.size + u.size) / 2) {
                    // Collected!
                    const points = u.isSuper ? 5 : 1;
                    score += points;
                    scoreDisplay.textContent = `Punkte: ${score}`;
                    
                    if (score > highScore) {
                        highScore = score;
                        localStorage.setItem('amelie-highscore', highScore);
                        highscoreDisplay.textContent = `Highscore: ${highScore}`;
                    }
                    
                    // Create particles
                    createParticles(u.x, u.y, points);
                    
                    unicorns.splice(i, 1);
                    continue;
                }
                
                // Remove if off screen
                if (u.y > canvas.height + 100) {
                    unicorns.splice(i, 1);
                }
            }
            
            // Update and Draw Particles
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                p.alpha = p.life / 60;
                
                ctx.globalAlpha = p.alpha;
                ctx.font = `${p.size}px Arial`;
                ctx.fillText(p.emoji, p.x, p.y);
                ctx.globalAlpha = 1;
                
                if (p.life <= 0) {
                    particles.splice(i, 1);
                }
            }
            
            requestAnimationFrame(gameLoop);
        }

        function createParticles(x, y, points) {
            // Point text
            particles.push({
                x: x,
                y: y,
                vx: 0,
                vy: -3,
                emoji: `+${points}`,
                size: 40,
                life: 60,
                alpha: 1
            });
            
            // Sparkles
            const sparkles = ['✨', '⭐', '💫', '🌟', '💖'];
            for (let i = 0; i < 8; i++) {
                const angle = (Math.PI * 2 * i) / 8;
                particles.push({
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * 3,
                    vy: Math.sin(angle) * 3,
                    emoji: sparkles[i % sparkles.length],
                    size: 25,
                    life: 40,
                    alpha: 1
                });
            }
        }

        // Handle resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            player.y = canvas.height - 100;
        });
    </script>
</body>
</html>